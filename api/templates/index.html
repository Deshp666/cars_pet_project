<!-- api/templates/index.html -->
<!DOCTYPE html>
<html>
<head>
    <title>Car Price Predictor</title>
    <style>
        body { font-family: Arial, max-width: 800px; margin: 30px auto; padding: 20px; }
        .form-group { margin: 10px 0; }
        label { display: inline-block; width: 150px; }
        input, select { width: 250px; padding: 5px; }
        button { margin-top: 15px; padding: 8px 16px; }
        #result { margin-top: 20px; padding: 10px; background: #e9f5e9; display: none; }
    </style>
</head>
<body>
    <h1>ðŸš— Car Price Predictor</h1>
    <form id="carForm">
        <div class="form-group">
            <label>Name:</label>
            <input name="name" value="Maruti" required>
        </div>
        <div class="form-group">
            <label>Year:</label>
            <input name="year" type="number" value="2015" min="1990" max="2025" required>
        </div>
        <div class="form-group">
            <label>Km Driven:</label>
            <input name="km_driven" type="number" value="50000" min="0" required>
        </div>
        <div class="form-group">
            <label>Fuel:</label>
            <select name="fuel" required>
                <option>Petrol</option>
                <option>Diesel</option>
                <option>CNG</option>
                <option>LPG</option>
                <option>Electric</option>
            </select>
        </div>
        <div class="form-group">
            <label>Seller Type:</label>
            <select name="seller_type" required>
                <option>Individual</option>
                <option>Dealer</option>
                <option>Trustmark Dealer</option>
            </select>
        </div>
        <div class="form-group">
            <label>Transmission:</label>
            <select name="transmission" required>
                <option>Manual</option>
                <option>Automatic</option>
            </select>
        </div>
        <div class="form-group">
            <label>Owner:</label>
            <select name="owner" required>
                <option>First Owner</option>
                <option>Second Owner</option>
                <option>Third Owner</option>
                <option>Fourth & Above Owner</option>
                <option>Test Drive Car</option>
            </select>
        </div>
        <div class="form-group">
            <label>Mileage:</label>
            <input name="mileage" value="21.14 kmpl" placeholder="e.g. 21.14 kmpl" required>
        </div>
        <div class="form-group">
            <label>Engine:</label>
            <input name="engine" value="1248 CC" placeholder="e.g. 1248 CC" required>
        </div>
        <div class="form-group">
            <label>Max Power:</label>
            <input name="max_power" value="74 bhp" placeholder="e.g. 74 bhp" required>
        </div>
        <div class="form-group">
            <label>Seats:</label>
            <input name="seats" type="number" value="5" min="2" max="10" required>
        </div>

        <button type="submit">Predict Price</button>
    </form>

    <div id="result"></div>

    <script>
        document.getElementById('carForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const formData = new FormData(e.target);
            const carData = Object.fromEntries(formData.entries());

            try {
                const res = await fetch('/predict', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(carData)
                });
                const result = await res.json();
                if (res.ok) {
                    document.getElementById('result').style.display = 'block';
                    document.getElementById('result').innerHTML =
                        `<h3>Predicted Price: ${result.predicted_price.toLocaleString()}</h3>`;
                } else {
                    throw new Error(result.detail || 'Unknown error');
                }
            } catch (err) {
                alert('Prediction failed: ' + err.message);
            }
        });
    </script>
</body>
</html>